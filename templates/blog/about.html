{% extends 'base-blog.html' %}
{% load static %}
{% block title %}å…³äº{% endblock %}
{% block link %}
    <link rel="stylesheet" href="{% static 'editormd/css/editormd.preview.css' %}"/>
    <script src='{% static "editormd/lib/marked.min.js" %}'></script>
    <script src='{% static "editormd/lib/prettify.min.js" %}'></script>
    <script src='{% static "editormd/lib/raphael.min.js" %}'></script>
    <script src='{% static "editormd/lib/underscore.min.js" %}'></script>
    <script src='{% static "editormd/lib/sequence-diagram.min.js" %}'></script>
    <script src='{% static "editormd/lib/flowchart.min.js" %}'></script>
    <script src='{% static "editormd/lib/jquery.flowchart.min.js" %}'></script>
    <script src='{% static "editormd/editormd.js" %}'></script>
{% endblock %}
{% block content %}
    <main class="page-main">
        <div class="layui-row">
            <!--    é¡µé¢å·¦ä¾§ç•™ç©º-->
            <div class="layui-hide-xs layui-col-md2 left-null"></div>
            <!--    é¡µé¢ä¸»ä½“éƒ¨åˆ†-->
            <div class="layui-col-xs12 layui-col-md10 page-main-centre">
                <div class="layui-row main-centre">
                    <!--            ä¸»ä½“ä¸­é—´æ­£æ–‡éƒ¨åˆ†-->
                    <div class="layui-col-md7 main-left">
                        <!--            æ–‡ç« å†…å®¹-->
                        <div class="index-new">
                            <div id='editormd-view' class="markdown-body">

                                <textarea style="display:none;">
{{ about_content.body }}
                                </textarea>
                            </div>
                        </div>
                    </div>
                    {% include 'blog/aside.html' %}
                    <!--            ä¸»ä½“å³ä¾§éƒ¨åˆ†-->
                </div>
            </div>
        </div>
    </main>
{% endblock %}

{% block js %}
    <script>
        // å¯¼èˆªæ å½“å‰æ ‡ç­¾é¡µ
        $(".nav6").addClass("layui-this");
    </script>
    <script>
        // markdownæ­£æ–‡æ˜¾ç¤º
        editormd.markdownToHTML("editormd-view", {
            htmlDecode: "style, script, iframe",
            emoji: true,
            taskList: true,
            tex: true,
            flowChart: true,
            sequenceDiagram: true,
        });
        // ç›®å½•
        w = $(window).width(); //æµè§ˆå™¨å½“å‰çª—å£å¯è§†åŒºåŸŸå®½åº¦
        if (w > 768) {
            openContent()
        }

        function openContent() {
            layui.use('layer', function () {
                var layer = layui.layer;
                layer.ready(function () {
                    setTimeout(function () {
                        layer.open({
                            id: 'catalogue'
                            , type: 1
                            , title: ['ğŸ“‹ç›®å½•', 'font-size:26px;color:#1e9fff']
                            , area: '230px'
                            , maxWidth: '500'
                            , maxHeight: '650'
                            , shade: 0
                            , anim: 5
                            , offset: ['80px', '15px']
                            , content: $('.markdown-toc-list').html()
                            , success: function (layero) {
                                layer.setTop(layero); //é‡ç‚¹2
                            }
                        });
                    }, 1000)
                });
            });
        }

        // å›¾ç‰‡ç‚¹å‡»æ”¾å¤§
        $('#editormd-view img').on('click', function () {
            layer.photos({
                photos: '#editormd-view',
                closeBtn: 2,
                anim: 0
            });
        })
    </script>
{% endblock %}
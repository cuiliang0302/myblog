{% load static %}
{#å³ä¾§æ ç›®éƒ¨åˆ†#}
<div class="layui-col-md3 main-right">
    <aside class="post-right-item suspend">
        <h4>
            <strong>
                <span>ğŸ‘ æ¨èé˜…è¯»</span>
            </strong>
        </h4>
        <div class="layui-row recommend-list">
            {% for tui in aside_dict.recommend %}
                <div class="layui-col-xs12 layui-col-md6 this-recommend">
                    <div>
                        <a href="/blog/show-{{ tui.id }}" class="img-zoom"><img src="{{ MEDIA_URL }}{{ tui.img }}"></a>
                        <a href="/blog/show-{{ tui.id }}" title="{{ tui.title }}"><p>{{ tui.title }}</p></a>
                    </div>
                </div>
            {% endfor %}
        </div>
    </aside>
    <!--        çƒ­é—¨æ–‡ç« -->
    <aside class="post-right-item suspend">
        <div id="top-list">
            <ul>
                <li>
                    <a href="javascript:;">
                        <span class="list-title">
                            <em>ğŸ”¥ </em>
                            <em>é˜…è¯»æ’è¡Œ</em>
                            <i class="fas fa-caret-down"></i>
{#                            <i class="fas fa-caret-up"></i>#}
                        </span>
                    </a>
                    <ul class="top-list-son">
                        <li>
                            <a href="javascript:;" class="top-title-this">é˜…è¯»æ’è¡Œ</a>
                        </li>
                        <li>
                            <a href="javascript:;">ç‚¹èµæ’è¡Œ</a>
                        </li>
                        <li>
                            <a href="javascript:;">æ”¶è—æ’è¡Œ</a>
                        </li>
                        <li>
                            <a href="javascript:;">è¯„è®ºæ’è¡Œ</a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
        <div id="top-list-content">
            <ol class="hot-list hot-list-show">
                {#                é˜…è¯»æ’è¡Œ#}
                {% for article in aside_dict.viewTop %}
                    <li>
                        <a href="/blog/show-{{ article.id }}"
                           title="{{ article.title }}">{{ article.title }}</a>
                    </li>
                {% endfor %}
            </ol>
            <ol class="hot-list">
                {#                ç‚¹èµæ’è¡Œ#}
                {% for article in aside_dict.likeTop %}
                    <li>
                        <a href="/blog/show-{{ article.id }}"
                           title="{{ article.title }}">{{ article.title }}</a>
                    </li>
                {% endfor %}
            </ol>
            <ol class="hot-list">
                {#                æ”¶è—æ’è¡Œ#}
                {% for article in aside_dict.collectionTop %}
                    <li>
                        <a href="/blog/show-{{ article.id }}"
                           title="{{ article.title }}">{{ article.title }}</a>
                    </li>
                {% endfor %}
            </ol>
            <ol class="hot-list">
                {#                è¯„è®ºæ’è¡Œ#}
                {% for article in aside_dict.commentTop %}
                    <li>
                        <a href="/blog/show-{{ article.id }}"
                           title="{{ article.title }}">{{ article.title }}</a>
                    </li>
                {% endfor %}
            </ol>
        </div>

    </aside>
    <aside class="post-right-item suspend post-right-tag">
        <h4>
            <strong>
                <span>ğŸ·ï¸ æ‰€æœ‰æ ‡ç­¾</span>
            </strong>
        </h4>
        <div id="tagscloud">
            {% for tag in aside_dict.tags %}
                <a href="/blog/tag-{{ tag.id }}" class="tag-color-{{ tag.id }}">{{ tag.name }}</a>
            {% endfor %}
            {% for tag in aside_dict.tags %}
                <a href="/blog/tag-{{ tag.id }}" class="tag-color-{{ tag.id }}">{{ tag.name }}</a>
            {% endfor %}
        </div>
    </aside>
    <aside class="post-right-item suspend">
        <h4>
            <strong>
                <span>ğŸ‘¦ å…³äºåšä¸»</span>
            </strong>
        </h4>
        <div class="about-me">
            <div>
                <i class="fas fa-user-cog"></i>
                <span>{{ aside_dict.info.position }}</span>
            </div>
            <div>
                <i class="fas fa-user-friends"></i>
                <span>{{ aside_dict.info.company }}</span>
            </div>
            <div>
                <i class="fas fa-location-arrow"></i>
                <span>{{ aside_dict.info.location }}</span>
            </div>
            <div>
                <i class="fas fa-envelope"></i>
                <span>{{ aside_dict.info.email }}</span>
            </div>
            <div class="about-logo">
                <span>
                    <a href="javascript:;">
                        <i class="layui-icon layui-icon-login-qq"></i>
                        <div id="qq">
                            <img src="{% static 'images/qq.png' %}">
                        </div>
                    </a>
                </span>
                <span>
                    <a href="javascript:;">
                        <i class="layui-icon layui-icon-login-wechat"></i>
                        <div id="weixin">
                            <img src="{% static 'images/weixin.png' %}">
                        </div>
                    </a>
                </span>
                <span>
                    <a href={{ aside_dict.info.csdn }} target="_blank"><img src="{% static 'images/csdn.png' %}"></a>
                </span>
                <span>
                    <a href={{ aside_dict.info.github }} target="_blank"><i class="fab fa-github"></i></a>
                </span>
            </div>
        </div>
    </aside>
    <aside class="post-right-item suspend">
        <h4>
            <strong>
                <span>ğŸ“Š ç½‘ç«™ä¿¡æ¯</span>
            </strong>
        </h4>
        <div class="about-me">
            <div>
                <i class="fas fa-business-time"></i>
                <span>è¿è¡Œæ—¶é—´ï¼š{{ aside_dict.data_count.day }}å¤©</span>
            </div>
            <div>
                <i class="fas fa-book-reader"></i>
                <span>æ€»è®¿é—®é‡ï¼š{{ aside_dict.data_count.pv }}</span>
            </div>
            <div>
                <i class="fas fa-user-plus"></i>
                <span>è®¿é—®äººæ•°ï¼š{{ aside_dict.data_count.uv }}</span>
            </div>
            <div>
                <i class="fas fa-chalkboard-teacher"></i>
                <span>è®¿é—®IPï¼š{{ aside_dict.data_count.ip }}</span>
            </div>
            <div>
                <i class="fas fa-book"></i>
                <span>æ–‡ç« æ€»æ•°ï¼š{{ aside_dict.data_count.article }}ç¯‡</span>
            </div>
            <div>
                <i class="fas fa-journal-whills"></i>
                <span>ç¬”è®°æ€»æ•°ï¼š{{ aside_dict.data_count.section }}ç¯‡</span>
            </div>
            <div>
                <i class="fas fa-columns"></i>
                <span>æ ç›®æ€»æ•°ï¼š{{ aside_dict.data_count.category }}ä¸ª</span>
            </div>
            <div>
                <i class="fas fa-paperclip"></i>
                <span>æ ‡ç­¾æ€»æ•°ï¼š{{ aside_dict.data_count.tag }}ä¸ª</span>
            </div>
        </div>
    </aside>
</div>
<script>
    /*æ ‡ç­¾äº‘*/
    var radius = 90;
    var d = 200;
    var dtr = Math.PI / 180;
    var mcList = [];
    var lasta = 1;
    var lastb = 1;
    var distr = true;
    var tspeed = 11;
    var size = 200;
    var mouseX = 0;
    var mouseY = 10;
    var howElliptical = 1;
    var aA = null;
    var oDiv = null;
    window.onload = function () {
        var i = 0;
        var oTag = null;
        oDiv = document.getElementById('tagscloud');
        aA = oDiv.getElementsByTagName('a');
        for (i = 0; i < aA.length; i++) {
            oTag = {};
            aA[i].onmouseover = (function (obj) {
                return function () {
                    obj.on = true;
                    this.style.zIndex = 9999;
                    this.style.color = '#fff';
                    this.style.padding = '5px 5px';
                    this.style.filter = "alpha(opacity=100)";
                    this.style.opacity = 1;
                }
            })(oTag)
            aA[i].onmouseout = (function (obj) {
                return function () {
                    obj.on = false;
                    this.style.zIndex = obj.zIndex;
                    this.style.color = '#fff';
                    this.style.padding = '5px';
                    this.style.filter = "alpha(opacity=" + 100 * obj.alpha + ")";
                    this.style.opacity = obj.alpha;
                    this.style.zIndex = obj.zIndex;
                }
            })(oTag)
            oTag.offsetWidth = aA[i].offsetWidth;
            oTag.offsetHeight = aA[i].offsetHeight;
            mcList.push(oTag);
        }
        sineCosine(0, 0, 0);
        positionAll();
        (function () {
            update();
            setTimeout(arguments.callee, 40);
        })();
    };

    function update() {
        var a, b, c = 0;
        a = (Math.min(Math.max(-mouseY, -size), size) / radius) * tspeed;
        b = (-Math.min(Math.max(-mouseX, -size), size) / radius) * tspeed;
        lasta = a;
        lastb = b;
        if (Math.abs(a) <= 0.01 && Math.abs(b) <= 0.01) {
            return;
        }
        sineCosine(a, b, c);
        for (var i = 0; i < mcList.length; i++) {
            if (mcList[i].on) {
                continue;
            }
            var rx1 = mcList[i].cx;
            var ry1 = mcList[i].cy * ca + mcList[i].cz * (-sa);
            var rz1 = mcList[i].cy * sa + mcList[i].cz * ca;

            var rx2 = rx1 * cb + rz1 * sb;
            var ry2 = ry1;
            var rz2 = rx1 * (-sb) + rz1 * cb;

            var rx3 = rx2 * cc + ry2 * (-sc);
            var ry3 = rx2 * sc + ry2 * cc;
            var rz3 = rz2;

            mcList[i].cx = rx3;
            mcList[i].cy = ry3;
            mcList[i].cz = rz3;

            per = d / (d + rz3);

            mcList[i].x = (howElliptical * rx3 * per) - (howElliptical * 2);
            mcList[i].y = ry3 * per;
            mcList[i].scale = per;
            var alpha = per;
            alpha = (alpha - 0.6) * (10 / 6);
            mcList[i].alpha = alpha * alpha * alpha - 0.2;
            mcList[i].zIndex = Math.ceil(100 - Math.floor(mcList[i].cz));
        }
        doPosition();
    }

    function positionAll() {
        var phi = 0;
        var theta = 0;
        var max = mcList.length;
        for (var i = 0; i < max; i++) {
            if (distr) {
                phi = Math.acos(-1 + (2 * (i + 1) - 1) / max);
                theta = Math.sqrt(max * Math.PI) * phi;
            } else {
                phi = Math.random() * (Math.PI);
                theta = Math.random() * (2 * Math.PI);
            }
            //åæ ‡å˜æ¢
            mcList[i].cx = radius * Math.cos(theta) * Math.sin(phi);
            mcList[i].cy = radius * Math.sin(theta) * Math.sin(phi);
            mcList[i].cz = radius * Math.cos(phi);

            aA[i].style.left = mcList[i].cx + oDiv.offsetWidth / 2 - mcList[i].offsetWidth / 2 + 'px';
            aA[i].style.top = mcList[i].cy + oDiv.offsetHeight / 2 - mcList[i].offsetHeight / 2 + 'px';
        }
    }

    function doPosition() {
        var l = oDiv.offsetWidth / 2;
        var t = oDiv.offsetHeight / 2;
        for (var i = 0; i < mcList.length; i++) {
            if (mcList[i].on) {
                continue;
            }
            var aAs = aA[i].style;
            if (mcList[i].alpha > 0.1) {
                if (aAs.display != '')
                    aAs.display = '';
            } else {
                if (aAs.display != 'none')
                    aAs.display = 'none';
                continue;
            }
            aAs.left = mcList[i].cx + l - mcList[i].offsetWidth / 2 + 'px';
            aAs.top = mcList[i].cy + t - mcList[i].offsetHeight / 2 + 'px';
            //aAs.fontSize=Math.ceil(12*mcList[i].scale/2)+8+'px';
            //aAs.filter="progid:DXImageTransform.Microsoft.Alpha(opacity="+100*mcList[i].alpha+")";
            aAs.filter = "alpha(opacity=" + 100 * mcList[i].alpha + ")";
            aAs.zIndex = mcList[i].zIndex;
            aAs.opacity = mcList[i].alpha;
        }
    }

    function sineCosine(a, b, c) {
        sa = Math.sin(a * dtr);
        ca = Math.cos(a * dtr);
        sb = Math.sin(b * dtr);
        cb = Math.cos(b * dtr);
        sc = Math.sin(c * dtr);
        cc = Math.cos(c * dtr);
    }
    // æœ€å¤šé˜…è¯» è¯„è®º è¯„åˆ†åˆ‡æ¢
    $(function () {
        // æ ‡é¢˜èœå•ä¸‹æ‹‰å±•å¼€
        $("#top-list>ul>li").hover(function () {
            $(this).children("ul").stop().slideDown(300);
            $(this).find("i").attr("class", "fas fa-caret-up");
        }, function () {
            $(this).children("ul").stop().slideUp(300);
            $(this).find("i").attr("class", "fas fa-caret-down");
        });
        // æ‰‹æœºç‰ˆç‚¹å‡»ä¸‹æ‹‰å±•å¼€èœå•
        $("#top-list>ul>li").click(function () {
            $(this).children("ul").stop().slideDown(300);
            $(this).find("i").attr("class", "fas fa-caret-up");
        });

        // ç‚¹å‡»åˆ‡æ¢ç›¸åº”åˆ—è¡¨
        $(".top-list-son li").click(function () {
            var text = $(this).text();
            $(this).siblings().find("a").removeClass("top-title-this")
            $(this).find("a").addClass("top-title-this")
            $(".list-title em").eq(1).html(text);
            $(".top-list-son").hide();
            var index = ($(this).index());
            var $ol = $("#top-list-content ol").eq(index);
            $ol.siblings().removeClass("hot-list-show")
            $ol.addClass("hot-list-show");
        })
    });
    // å…³äºåšä¸»è”ç³»æ–¹å¼
    $(function () {
        $("#weixin").parent("a").hover(function () {
            $("#weixin").stop().fadeToggle(500);
        })
        $("#qq").parent("a").hover(function () {
            $("#qq").stop().fadeToggle(500);
        })
    })
    // æ¨èé˜…è¯»å½“å‰é«˜äº®
    $(function (){
        $(".this-recommend").hover(function () {
            $(this).siblings().stop().fadeTo(100, 0.6);
        }, function (){
            $(this).siblings().stop().fadeTo(100, 1);
        })
    })
</script>